<div class="d-flex flex-row overflow-auto" id="makesImages">

</div>

<script>
    $(function () {
        getMakesImages()
    })

    getMakesImages = function () {
        $.get(`${root}Inventory/GetMakes`)
            .done(function (result) {
                const $container = $('#makesImages');
                $container.empty();

                result.forEach(function (make) {
                    const $img = $('<img>')
                        .attr('src', `/GTXImages/makes/${make.replace(/\s+/g, '-')}.png`)
                        .attr('data-make', make)
                        .addClass('img-fluid img-thumbnail me-2 hand-pointer hover-bw')
                        .css({ height: '80px' })
                        .click(function () {
                            const make = $(this).data("make");
                            showSpinner($("#filterOverlay"));
                            var model = { make: [make] };

                            $("#filtersModal [data-bs-dismiss='modal']").trigger("click");

                            $.ajax({
                                url: `${root}Inventory/ApplyMakes`,
                                type: "POST",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                data: JSON.stringify(model)   // ✅ send the model itself, not { model: model }
                            })
                            .done(function (response) {
                                hideSpinner($("#filterOverlay"));
                                window.location.href = response.redirectUrl;
                            })
                            .fail(function (xhr, status, error) {
                                hideSpinner($("#filterOverlay"));
                                console.error("Error applying term:", error, xhr.responseText);
                            });
                        });

                    $container.append($img);
                });
            })
            .fail(function (xhr, status, error) {
                console.error("Error applying term:", error);
            });
    }
</script>